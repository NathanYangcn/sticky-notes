# 这是什么？
- 这是一个nodeJS应用，使用express框架搭建的便签网站，暂时可用于文字记录，后续可扩展方向很多
- [预览地址](http://yangyoung.top/)

# 实现了哪些功能？
1. 添加便签
2. 删除便签
3. 修改便签内容
4. toast操作提醒
5. 页面回到顶部功能
6. 自动布局-瀑布流
7. 第三方登录功能：暂时只支持github登录
7. 记录用户登录状态
8. 数据库存储便签数据

# 使用了哪些技术？
- 前端
1. 面向对象方式编程
2. 组件化的方式开发
3. 事件发布订阅模式：解耦代码
4. webpack：实现模块化、编译、打包
5. npm script：使网站启动、操作执行更加方便		
- 后端
1. express 网站开发框架
2. MVC概念
3. 数据库、模型
4. 登录功能：OAuth2协议、session、cookie

# 实现过程?
1. 使用express：搭建网站框架
2. 使用webpack + npm script：搭建自动化流程
3. 编写常用组件：使用面向对象方式编写常用组件，增加复用性
4. 定义接口：前后端约定接口，根据约定分别开发
	- URL：接口名称
	- 请求的参数和类型
	- 响应的数据格式
5. 登录功能：根据OAuth2协议实现登录功能，并加入权限控制

# 涉及了哪些概念？
1. express 开发框架
	- 中间件
	- 路由
	- 模板引擎
	- 静态资源
	- 文件目录结构
2. MVC
	- 前后端分离
	- 前后端约定接口
	- 前后端联调
3. 前端
	- 自动化流程环境：webpack
	- 面向对象方式编程
	- 组件化的方式开发
4. 后端
	- 路由跳转
	- 数据库
	- 模型：数据表结构
	- sequelize 模型化数据
5. 登录功能
	- 官方登录、第三方登录
	- OAuth2协议、passport工具
	- cookie、session

# 遇到的问题和部分的概念？
#### 1. webpack的配置问题
- 说好的博客还没写，后续会单独抽出一个目录，记录并整理我的webpack闯关过程
- 问题：引入jQuery后不起作用，报错信息为：$ 未定义
- 解决：配置全部完成且正确，当时花了很长时间排查这个错误，最后这个错误竟然是引入jQuery版本的问题，jQuery-1.9.1不支持，更换新版本后立刻生效，问题就这样被解决了
- 话外：jQuery-1.9.1 那个时代，webpack应该还没有出生，这个未查仅是猜想
#### 2. 配置webpack.config.js文件时，若需用到正则表达式匹配文件后缀，需要对点(.)进行转义，例如：/\.less$/ (匹配less文件)
#### 3. 使用npm包监听文件改动后自动编译时遇到的问题
- 问题：使用npm包：onchange监听文件，在改动任何内容时运行自动编译命令，按使用规则配置完成后不起作用
- 解决：onchange对Mac和Windows配置上的写法有差异，Windows需要使用双引号且需转义双引号
#### 4. require 和 module.exports
- require：用于在当前文件加载外部模块
- module.exports：用于将当前文件导出为模块，供外部文件使用
- exports是一个对象，如果导出的模块是一个函数，需要给exports增加一个属性，并将函数绑定在该属性上，再导出；如果导出的模块本身就是一个对象，那就可以直接赋值或者绑定属性给exports
#### 5. MVC 概念
- M是模型(model)：与数据库进行交互，用于获取数据
- V是视图(view)：渲染数据并展示给用户
- C是控制器(controller)：控制器是一个桥梁连接模型和视图，将前端参数传递给后台，将后台响应传递给前端，控制请求的流向
- 前后端分离的概念：将视图拆分出来交给前端来做，将模型和控制器交由后台管理，前后端唯一的交互便是接口，所以前后端开发前需要约定接口，开发后需要联调
- 网站处理请求的逻辑：当一个请求到来之后，交给路由去处理，路由将请求分发给具体的处理逻辑，逻辑根据实际情况，组织响应数据并发送给前端，前端根据响应数据渲染展示页面
#### 6. 模型
- 模型就是一个表结构，与数据库进行交互
- 例如，定义一个用户模型，可能包含字段有：用户名、密码、手机号、邮箱、性别、昵称、UID、头像……(PS：和excel表头很像)
#### 7. 定义接口
- 前后端唯一的交互便是接口，所以通常需要前后台一起约定
- 前端主要负责渲染数据：当前端需要数据时，便将请求参数发送到接口地址，等待后端响应数据到达之后渲染页面
- 后端主要负责存取数据：当后端接收到请求，便以请求参数为条件查找数据，并将响应数据发送给前端
- 定义接口便是定义：接口地址、请求参数、请求类型、响应数据格式；需在响应数据中需要加入status以此说明数据响应是否正确
#### 8. OAuth2第三方登录流程
- 我们有一个A网站，当用户浏览A网站并选择第三方登录时，A网站前端向A网站服务器发送登录请求，A网站服务器向第三方登录平台发送登录请求，请求第三方登录平台验证用户信息是否正确，如果验证通过，第三方登录平台向A网站服务器发送数据(用户相关信息)，此时用户以第三方登录的方式成功登录A网站
- 当使用OAuth2实现第三方登录功能时，需要到指定的第三方平台申请clientID、clientSecret、callbackURL后配置路由
#### 9. cookie、session
- 每一对的cookie、session都是一一对应的关系，session是存到服务器上的，cookie是写入浏览器内的
- 因为http协议是无状态的协议，所以当记录用户登录状态时，就需要服务端创建特定session用于标识跟踪特定用户的状态
- 每次http发起请求时，客户端都会发送相应cookie到服务端，服务端将cookie与session进行匹配，以此来识别具体用户
- 当浏览器内没有与session对应的cookie时，此时会将该cookie种在浏览器内，以便在发起请求时来识别用户
- 总结：cookie是由session写入浏览器内的，session是由cookie实现识别用户功能的

# 后续拓展
1. 网页版聊天室
2. 多人协作应用
3. 文章评论功能(话题交流功能)...